<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Mein GitHub Quiz</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; line-height: 1.6; background: #f4f4f9; }
        .card { background: white; padding: 20px; border-radius: 8px; shadow: 0 2px 5px rgba(0,0,0,0.1); }
        button { background: #007bff; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; margin-top: 10px; }
        .option { display: block; margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; }
        .option:hover { background: #e9ecef; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="card">
    <h1>üìù Quiz Uploader</h1>
    <p>W√§hle deine <code>.txt</code> Datei aus:</p>
    <input type="file" id="fileInput" accept=".txt">
    <hr>
    
    <div id="quizArea" class="hidden">
        <h3 id="questionText">Frage erscheint hier</h3>
        <div id="optionsContainer"></div>
        <p id="feedback"></p>
        <button id="nextBtn" class="hidden">N√§chste Frage</button>
    </div>

    <div id="resultArea" class="hidden">
        <h2>Ergebnis</h2>
        <p id="scoreText"></p>
        <button onclick="location.reload()">Neues Quiz laden</button>
    </div>
</div>

<script>
let questions = [];
let currentIndex = 0;
let score = 0;

document.getElementById('fileInput').addEventListener('change', function(e) {
    const file = e.target.files[0];
    const reader = new FileReader();
    
    reader.onload = function(event) {
        const lines = event.target.result.split('\n');
        questions = lines.filter(l => l.includes(';')).map(line => {
            const parts = line.split(';').map(p => p.trim());
            return {
                q: parts[0],
                options: parts.slice(1, -1),
                correct: parseInt(parts[parts.length - 1])
            };
        });
        startQuiz();
    };
    reader.readAsText(file);
});

function startQuiz() {
    document.getElementById('fileInput').classList.add('hidden');
    document.getElementById('quizArea').classList.remove('hidden');
    showQuestion();
}

function showQuestion() {
    const q = questions[currentIndex];
    document.getElementById('questionText').innerText = q.q;
    const container = document.getElementById('optionsContainer');
    container.innerHTML = '';
    document.getElementById('feedback').innerText = '';
    document.getElementById('nextBtn').classList.add('hidden');

    q.options.forEach((opt, i) => {
        const div = document.createElement('div');
        div.className = 'option';
        div.innerText = opt;
        div.onclick = () => checkAnswer(i);
        container.appendChild(div);
    });
}

function checkAnswer(i) {
    if (document.getElementById('nextBtn').classList.contains('hidden')) {
        const correct = questions[currentIndex].correct;
        if (i === correct) {
            score++;
            document.getElementById('feedback').innerText = "‚úÖ Richtig!";
        } else {
            document.getElementById('feedback').innerText = "‚ùå Falsch!";
        }
        document.getElementById('nextBtn').classList.remove('hidden');
    }
}

document.getElementById('nextBtn').onclick = () => {
    currentIndex++;
    if (currentIndex < questions.length) {
        showQuestion();
    } else {
        showResult();
    }
};

function showResult() {
    document.getElementById('quizArea').classList.add('hidden');
    document.getElementById('resultArea').classList.remove('hidden');
    document.getElementById('scoreText').innerText = `Du hast ${score} von ${questions.length} Fragen richtig beantwortet!`;
}
</script>
</body>
</html>
